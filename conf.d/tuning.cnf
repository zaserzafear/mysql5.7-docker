[mysqld]
# ===== Logging =====
log_error                      = /var/log/mysql/log_error.log
general_log_file               = /var/log/mysql/general_log.log
general_log                    = 1
slow_query_log                 = 1
slow_query_log_file            = /var/log/mysql/slow_query_log.log
long_query_time                = 2
log_queries_not_using_indexes  = 1

# ===== SQL Modes =====
sql_mode             = STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION

# ===== Charset and collation =====
character_set_server = utf8
collation-server     = utf8_general_ci

# ===== Connection settings =====
max_connections      = 1000
max_allowed_packet   = 4M
connect_timeout      = 10
wait_timeout         = 28800
interactive_timeout  = 28800
skip-name-resolve

# ===== Trust function creators to avoid ERROR 1418 =====
log_bin_trust_function_creators = 1

# ===== InnoDB Performance Tuning =====
innodb_buffer_pool_size         = 1G
innodb_log_file_size            = 48M
innodb_log_buffer_size          = 16M
innodb_flush_log_at_trx_commit  = 1
innodb_file_per_table           = 1
innodb_flush_method             = O_DIRECT

# ===== Query Cache (enabled like RDS) =====
query_cache_type = 1
query_cache_size = 83M

# ===== Temp Table & Threads =====
tmp_table_size         = 16M
max_heap_table_size    = 16M
thread_cache_size      = 2
table_open_cache       = 1800
table_definition_cache = 5300
